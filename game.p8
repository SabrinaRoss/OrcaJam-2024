pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
function _draw()
	cls()
	state_machine_draw()
	draw_state_ui()
end

function _update()
	input_check()
	if (time() - last > .02) then
		last = time()
		state_machine_update()
		if radius == 0 then radius = 30 end
	end
end

function _init()
	state = 0
	cam_max = 128
	x = 64
	y = 64
	margin = 40
	radius = 20
	byte = 8
	angle = 0
	max_states = 5 // idk why doing this but o'well
	last = time()
end

function input_check() 
	if state < 0 then state += 1 end
	if state > max_states-1 then state -= 1 end
	if btnp((🅾️)) then state -= 1 end
	if btnp((❎)) then state += 1 end
end
-->8
// manipulation

function shrink(x, y) 
	radius -= 1
	local new_x = x*cos(0) - y*sin(0)
	local new_y = x*sin(0) + y*cos(0)
	return new_x,new_y
end
-->8
// state machine

function state_machine_update() 
		if (state == 1) then
			x,y = shrink(x, y)
		end 
end
function state_machine_draw() 
	if (state == 1) then
		circfill(x, y, radius, 8)
		circfill(x+margin, y+margin, radius,10)
		circfill(x-margin, y-margin, radius, 12)
	end
end
-->8
// sprites

function draw_state_ui()
	for i = max_states, 0, -1 do
		spr(i, cam_max - (byte), cam_max - (byte * i))
		if (state == i) then
			rect(cam_max - (byte), cam_max - (byte * i)-1, cam_max-1, cam_max-(i*byte)-byte)
		end
	end
end
__gfx__
00000000444444444444444444444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000400000044000000440000004400000044000000400000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700400990044009900440099004400990044090900400000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000409009044090900440900904409009044099990400000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000409009044000900440009004400090044000900400000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700400990044099990440090004409009044000900400000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000400000044000000440999904400990044000000400000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000444444444444444444444444444444444444444400000000000000000000000000000000000000000000000000000000000000000000000000000000
